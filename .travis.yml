language: node_js
sudo: false
dist: trusty

addons:
  apt:
    packages:
      # Dependencies Needed for Canvas https://github.com/Automattic/node-canvas
      - libcairo2-dev
      - libjpeg8-dev
      - libpango1.0-dev
      - libgif-dev
      - build-essential
      - g++

node_js:
  - node

cache:
  yarn: true
  directories:
    - "node_modules"

script:
  - yarn lint
  - yarn test
  - yarn benchmark

before_deploy:
  - yarn build

deploy:
  provider: pages
  skip_cleanup: true
  github_token: $GITHUB_TOKEN # Set in travis-ci
  local_dir: ./build
  fqdn: solver.0xcaff.me
